import { __decorate } from "tslib";
import { ComponentFactoryResolver, Directive, ElementRef, EventEmitter, Input, OnChanges, OnInit, Output, ReflectiveInjector, ViewContainerRef } from '@angular/core';
import { IconPickerComponent } from './icon-picker.component';
let IconPickerDirective = class IconPickerDirective {
    constructor(vcRef, el, cfr) {
        this.vcRef = vcRef;
        this.el = el;
        this.cfr = cfr;
        this.ipPlaceHolder = 'Search icon...';
        this.ipPosition = 'right';
        this.ipFallbackIcon = 'fas fa-user';
        this.ipHeight = 'auto';
        this.ipMaxHeight = '200px';
        this.ipWidth = '230px';
        this.ipIconSize = '16px';
        this.ipIconVerticalPadding = '6px'; // Top / Bottom
        this.ipIconHorizontalPadding = '10px'; // Left / Right
        this.ipIconPack = ['bs', 'fa5'];
        this.ipKeepSearchFilter = 'false';
        // Default design with bootstrap
        this.ipButtonStyleClass = 'btn btn-default';
        this.ipDivSearchStyleClass = '';
        this.ipInputSearchStyleClass = 'form-control input-sm';
        this.iconPickerSelect = new EventEmitter(true);
        this.ignoreChanges = false;
        this.created = false;
    }
    ngOnChanges(changes) {
        if (changes.iconPicker) {
            this.ignoreChanges = false;
        }
    }
    ngOnInit() {
        this.iconPicker = this.iconPicker || this.ipFallbackIcon || 'fa fa-user-plus';
        this.iconPickerSelect.emit(this.iconPicker);
    }
    onClick() {
        this.openDialog();
    }
    openDialog() {
        if (!this.created) {
            this.created = true;
            const vcRef = this.vcRef;
            const compFactory = this.cfr.resolveComponentFactory(IconPickerComponent);
            // tslint:disable-next-line: deprecation
            const injector = ReflectiveInjector.fromResolvedProviders([], vcRef.parentInjector);
            const cmpRef = vcRef.createComponent(compFactory, 0, injector, []);
            cmpRef.instance.setDialog(this, this.el, this.iconPicker, this.ipPosition, this.ipHeight, this.ipMaxHeight, this.ipWidth, this.ipPlaceHolder, this.ipFallbackIcon, this.ipIconPack, this.ipIconSize, this.ipIconVerticalPadding, this.ipIconHorizontalPadding, this.ipButtonStyleClass, this.ipDivSearchStyleClass, this.ipInputSearchStyleClass, this.ipKeepSearchFilter);
            this.dialog = cmpRef.instance;
            if (this.vcRef !== vcRef) {
                cmpRef.changeDetectorRef.detectChanges();
            }
        }
        else if (this.dialog) {
            this.dialog.openDialog(this.iconPicker);
        }
    }
    iconSelected(icon) {
        this.iconPickerSelect.emit(icon);
    }
};
IconPickerDirective.ctorParameters = () => [
    { type: ViewContainerRef },
    { type: ElementRef },
    { type: ComponentFactoryResolver }
];
__decorate([
    Input()
], IconPickerDirective.prototype, "iconPicker", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipPlaceHolder", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipPosition", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipFallbackIcon", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipHeight", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipMaxHeight", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipWidth", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipIconSize", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipIconVerticalPadding", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipIconHorizontalPadding", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipIconPack", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipKeepSearchFilter", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipButtonStyleClass", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipDivSearchStyleClass", void 0);
__decorate([
    Input()
], IconPickerDirective.prototype, "ipInputSearchStyleClass", void 0);
__decorate([
    Output()
], IconPickerDirective.prototype, "iconPickerSelect", void 0);
IconPickerDirective = __decorate([
    Directive({
        // tslint:disable-next-line: directive-selector
        selector: '[iconPicker]',
        // tslint:disable-next-line: no-host-metadata-property
        host: {
            '(click)': 'onClick()'
        }
    })
], IconPickerDirective);
export { IconPickerDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWNvbi1waWNrZXIuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LWljb24tcGlja2VyLyIsInNvdXJjZXMiOlsibGliL2ljb24tcGlja2VyLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNMLHdCQUF3QixFQUN4QixTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixLQUFLLEVBQ0wsU0FBUyxFQUNULE1BQU0sRUFDTixNQUFNLEVBQ04sa0JBQWtCLEVBQ2xCLGdCQUFnQixFQUNqQixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUMsbUJBQW1CLEVBQUMsTUFBTSx5QkFBeUIsQ0FBQztBQVU1RCxJQUFhLG1CQUFtQixHQUFoQyxNQUFhLG1CQUFtQjtJQXdCOUIsWUFDVSxLQUF1QixFQUN2QixFQUFjLEVBQ2QsR0FBNkI7UUFGN0IsVUFBSyxHQUFMLEtBQUssQ0FBa0I7UUFDdkIsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQUNkLFFBQUcsR0FBSCxHQUFHLENBQTBCO1FBekI5QixrQkFBYSxHQUFHLGdCQUFnQixDQUFDO1FBQ2pDLGVBQVUsR0FBRyxPQUFPLENBQUM7UUFDckIsbUJBQWMsR0FBRyxhQUFhLENBQUM7UUFDL0IsYUFBUSxHQUFHLE1BQU0sQ0FBQztRQUNsQixnQkFBVyxHQUFHLE9BQU8sQ0FBQztRQUN0QixZQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ2xCLGVBQVUsR0FBRyxNQUFNLENBQUM7UUFDcEIsMEJBQXFCLEdBQUcsS0FBSyxDQUFDLENBQUMsZUFBZTtRQUM5Qyw0QkFBdUIsR0FBRyxNQUFNLENBQUMsQ0FBQyxlQUFlO1FBQ2pELGVBQVUsR0FBRyxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztRQUMzQix1QkFBa0IsR0FBRyxPQUFPLENBQUM7UUFDdEMsZ0NBQWdDO1FBQ3ZCLHVCQUFrQixHQUFHLGlCQUFpQixDQUFDO1FBQ3ZDLDBCQUFxQixHQUFHLEVBQUUsQ0FBQztR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QjtBQUNsQjtJQUFSLEtBQUssRUFBRTt1REFBcUI7QUFDcEI7SUFBUixLQUFLLEVBQUU7a0VBQStCO0FBQzlCO0lBQVIsS0FBSyxFQUFFO29FQUFrQztBQUNqQztJQUFSLEtBQUssRUFBRTt1REFBNEI7QUFDM0I7SUFBUixLQUFLLEVBQUU7K0RBQThCO0FBRTdCO0lBQVIsS0FBSyxFQUFFOytEQUF3QztBQUN2QztJQUFSLEtBQUssRUFBRTtrRUFBNEI7QUFDM0I7SUFBUixLQUFLLEVBQUU7b0VBQW1EO0FBRWpEO0lBQVQsTUFBTSxFQUFFOzZEQUFtRDtBQWxCakQsbUJBQW1CO0lBUi9CLFNBQVMsQ0FBQztRQUNULCtDQUErQztRQUMvQyxRQUFRLEVBQUUsY0FBYztRQUN4QixzREFBc0Q7UUFDdEQsSUFBSSxFQUFFO1lBQ0osU0FBUyxFQUFFLFdBQVc7U0FDdkI7S0FDRixDQUFDO0dBQ1csbUJBQW1CLENBd0UvQjtTQXhFWSxtQkFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcclxuICBEaXJlY3RpdmUsXHJcbiAgRWxlbWVudFJlZixcclxuICBFdmVudEVtaXR0ZXIsXHJcbiAgSW5wdXQsXHJcbiAgT25DaGFuZ2VzLFxyXG4gIE9uSW5pdCxcclxuICBPdXRwdXQsXHJcbiAgUmVmbGVjdGl2ZUluamVjdG9yLFxyXG4gIFZpZXdDb250YWluZXJSZWZcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7SWNvblBpY2tlckNvbXBvbmVudH0gZnJvbSAnLi9pY29uLXBpY2tlci5jb21wb25lbnQnO1xyXG5cclxuQERpcmVjdGl2ZSh7XHJcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBkaXJlY3RpdmUtc2VsZWN0b3JcclxuICBzZWxlY3RvcjogJ1tpY29uUGlja2VyXScsXHJcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby1ob3N0LW1ldGFkYXRhLXByb3BlcnR5XHJcbiAgaG9zdDoge1xyXG4gICAgJyhjbGljayknOiAnb25DbGljaygpJ1xyXG4gIH1cclxufSlcclxuZXhwb3J0IGNsYXNzIEljb25QaWNrZXJEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XHJcbiAgQElucHV0KCkgaWNvblBpY2tlcjogc3RyaW5nO1xyXG4gIEBJbnB1dCgpIGlwUGxhY2VIb2xkZXIgPSAnU2VhcmNoIGljb24uLi4nO1xyXG4gIEBJbnB1dCgpIGlwUG9zaXRpb24gPSAncmlnaHQnO1xyXG4gIEBJbnB1dCgpIGlwRmFsbGJhY2tJY29uID0gJ2ZhcyBmYS11c2VyJztcclxuICBASW5wdXQoKSBpcEhlaWdodCA9ICdhdXRvJztcclxuICBASW5wdXQoKSBpcE1heEhlaWdodCA9ICcyMDBweCc7XHJcbiAgQElucHV0KCkgaXBXaWR0aCA9ICcyMzBweCc7XHJcbiAgQElucHV0KCkgaXBJY29uU2l6ZSA9ICcxNnB4JztcclxuICBASW5wdXQoKSBpcEljb25WZXJ0aWNhbFBhZGRpbmcgPSAnNnB4JzsgLy8gVG9wIC8gQm90dG9tXHJcbiAgQElucHV0KCkgaXBJY29uSG9yaXpvbnRhbFBhZGRpbmcgPSAnMTBweCc7IC8vIExlZnQgLyBSaWdodFxyXG4gIEBJbnB1dCgpIGlwSWNvblBhY2sgPSBbJ2JzJywgJ2ZhNSddO1xyXG4gIEBJbnB1dCgpIGlwS2VlcFNlYXJjaEZpbHRlciA9ICdmYWxzZSc7XHJcbiAgLy8gRGVmYXVsdCBkZXNpZ24gd2l0aCBib290c3RyYXBcclxuICBASW5wdXQoKSBpcEJ1dHRvblN0eWxlQ2xhc3MgPSAnYnRuIGJ0bi1kZWZhdWx0JztcclxuICBASW5wdXQoKSBpcERpdlNlYXJjaFN0eWxlQ2xhc3MgPSAnJztcclxuICBASW5wdXQoKSBpcElucHV0U2VhcmNoU3R5bGVDbGFzcyA9ICdmb3JtLWNvbnRyb2wgaW5wdXQtc20nO1xyXG5cclxuICBAT3V0cHV0KCkgaWNvblBpY2tlclNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPih0cnVlKTtcclxuXHJcbiAgcHJpdmF0ZSBkaWFsb2c6IGFueTtcclxuICBwcml2YXRlIGNyZWF0ZWQ6IGJvb2xlYW47XHJcbiAgcHJpdmF0ZSBpZ25vcmVDaGFuZ2VzID0gZmFsc2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgcHJpdmF0ZSB2Y1JlZjogVmlld0NvbnRhaW5lclJlZixcclxuICAgIHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsXHJcbiAgICBwcml2YXRlIGNmcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyKSB7XHJcbiAgICB0aGlzLmNyZWF0ZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IGFueSk6IHZvaWQge1xyXG4gICAgaWYgKGNoYW5nZXMuaWNvblBpY2tlcikge1xyXG4gICAgICB0aGlzLmlnbm9yZUNoYW5nZXMgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5pY29uUGlja2VyID0gdGhpcy5pY29uUGlja2VyIHx8IHRoaXMuaXBGYWxsYmFja0ljb24gfHwgJ2ZhIGZhLXVzZXItcGx1cyc7XHJcbiAgICB0aGlzLmljb25QaWNrZXJTZWxlY3QuZW1pdCh0aGlzLmljb25QaWNrZXIpO1xyXG4gIH1cclxuXHJcbiAgb25DbGljaygpIHtcclxuICAgIHRoaXMub3BlbkRpYWxvZygpO1xyXG4gIH1cclxuXHJcbiAgb3BlbkRpYWxvZygpIHtcclxuICAgIGlmICghdGhpcy5jcmVhdGVkKSB7XHJcbiAgICAgIHRoaXMuY3JlYXRlZCA9IHRydWU7XHJcbiAgICAgIGNvbnN0IHZjUmVmID0gdGhpcy52Y1JlZjtcclxuICAgICAgY29uc3QgY29tcEZhY3RvcnkgPSB0aGlzLmNmci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeShJY29uUGlja2VyQ29tcG9uZW50KTtcclxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBkZXByZWNhdGlvblxyXG4gICAgICBjb25zdCBpbmplY3RvciA9IFJlZmxlY3RpdmVJbmplY3Rvci5mcm9tUmVzb2x2ZWRQcm92aWRlcnMoW10sIHZjUmVmLnBhcmVudEluamVjdG9yKTtcclxuICAgICAgY29uc3QgY21wUmVmID0gdmNSZWYuY3JlYXRlQ29tcG9uZW50KGNvbXBGYWN0b3J5LCAwLCBpbmplY3RvciwgW10pO1xyXG4gICAgICBjbXBSZWYuaW5zdGFuY2Uuc2V0RGlhbG9nKHRoaXMsIHRoaXMuZWwsIHRoaXMuaWNvblBpY2tlciwgdGhpcy5pcFBvc2l0aW9uLCB0aGlzLmlwSGVpZ2h0LCB0aGlzLmlwTWF4SGVpZ2h0LFxyXG4gICAgICAgIHRoaXMuaXBXaWR0aCwgdGhpcy5pcFBsYWNlSG9sZGVyLCB0aGlzLmlwRmFsbGJhY2tJY29uLCB0aGlzLmlwSWNvblBhY2ssIHRoaXMuaXBJY29uU2l6ZSxcclxuICAgICAgICB0aGlzLmlwSWNvblZlcnRpY2FsUGFkZGluZywgdGhpcy5pcEljb25Ib3Jpem9udGFsUGFkZGluZywgdGhpcy5pcEJ1dHRvblN0eWxlQ2xhc3MsIHRoaXMuaXBEaXZTZWFyY2hTdHlsZUNsYXNzLFxyXG4gICAgICAgIHRoaXMuaXBJbnB1dFNlYXJjaFN0eWxlQ2xhc3MsIHRoaXMuaXBLZWVwU2VhcmNoRmlsdGVyKTtcclxuICAgICAgdGhpcy5kaWFsb2cgPSBjbXBSZWYuaW5zdGFuY2U7XHJcblxyXG4gICAgICBpZiAodGhpcy52Y1JlZiAhPT0gdmNSZWYpIHtcclxuICAgICAgICBjbXBSZWYuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZGlhbG9nKSB7XHJcbiAgICAgIHRoaXMuZGlhbG9nLm9wZW5EaWFsb2codGhpcy5pY29uUGlja2VyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGljb25TZWxlY3RlZChpY29uOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuaWNvblBpY2tlclNlbGVjdC5lbWl0KGljb24pO1xyXG4gIH1cclxuXHJcbn1cclxuIl19